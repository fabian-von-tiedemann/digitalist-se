---
phase: 03-content-conversion
plan: 03
type: execute
depends_on: []
files_modified: [src/lib/directus.ts, src/components/ContactForm.tsx, src/components/NewsletterSignup.tsx, src/components/CTABanner.tsx, src/app/[locale]/kontakt/page.tsx, messages/sv.json, messages/en.json]
---

<objective>
Create contact page and conversion components with Directus form submissions

Purpose: Maximize lead generation - the core business goal. Form submissions stored in Directus for CRM integration.
Output: Contact page, newsletter signup, CTA banners, form_submissions collection in Directus
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/lib/directus.ts
@src/components/Hero.tsx
@src/app/[locale]/page.tsx
@messages/sv.json

**Tech stack available:** Next.js 15, next-intl, Tailwind CSS, Directus SDK
**Established patterns:** Client components for interactive UI, brutalist styling
**Directus CMS:** https://cms.main-bvxea6i-gyichbvbjhhpy.eu-5.platformsh.site/admin

**Constraining decisions:**
- PROJECT.md: "Pengar in" - every element evaluated against conversion
- PROJECT.md: Multiple conversion points (book meeting, contact form, whitepaper)
- Phase 01-03: Brutalist design tokens
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create form_submissions collection and API route</name>
  <files>src/lib/directus.ts, src/app/api/submit/route.ts</files>
  <action>
Create form_submissions collection in Directus:

Collection: form_submissions
Fields:
- id (uuid, primary key, auto)
- date_created (datetime, auto)
- type (string: contact, newsletter, meeting)
- name (string, nullable)
- email (string, required)
- company (string, nullable)
- phone (string, nullable)
- message (text, nullable)
- interest (string: shield, spear, core, brain, general - nullable)
- status (string: new, contacted, converted, closed - default: new)
- notes (text, nullable - for internal CRM notes)

Update src/lib/directus.ts:
- Add FormSubmission type
- Add createFormSubmission helper function using Directus SDK

Create API route at /api/submit:
- POST handler that validates input
- Creates submission in Directus using SDK
- Returns success/error JSON
- Rate limiting consideration (basic for v1)

Ensure Directus permissions allow creating form_submissions from API token.
  </action>
  <verify>POST to /api/submit creates entry in Directus form_submissions</verify>
  <done>form_submissions collection exists, API route works, submissions visible in Directus</done>
</task>

<task type="auto">
  <name>Task 2: Create ContactForm component with Directus submission</name>
  <files>src/components/ContactForm.tsx</files>
  <action>
Create ContactForm client component:
- Fields: name (required), email (required, validation), company, phone, message (required), interest dropdown
- Brutalist form styling: border-2 inputs, accent focus states, shadow-brutal button
- Client-side validation with inline error messages
- Submit to /api/submit endpoint
- Loading state with spinner during submission
- Success state with confirmation message
- Error state with retry option

Interest dropdown options:
- Skyddet (Shield) - Säker AI-infrastruktur
- Spjutet (Spear) - Offensiv AI-kapacitet
- Kärnan (Core) - Infrastruktur och dataplattform
- Hjärnan (Brain) - Intelligens och ML
- Generell förfrågan

Use native HTML5 validation + custom error display.
Accessible focus states (visible ring).
Form resets after successful submission.
  </action>
  <verify>npm run build passes, form submits to Directus, validation works</verify>
  <done>ContactForm component works end-to-end with Directus storage</done>
</task>

<task type="auto">
  <name>Task 3: Create conversion components, contact page, and integrate</name>
  <files>src/components/NewsletterSignup.tsx, src/components/CTABanner.tsx, src/app/[locale]/kontakt/page.tsx, src/app/[locale]/page.tsx, messages/sv.json, messages/en.json</files>
  <action>
Create NewsletterSignup component:
- Inline email input with submit button
- Submits to /api/submit with type: 'newsletter'
- Success state with confirmation
- Compact design for footer/sidebar

Create CTABanner component:
- Props: variant ('primary' | 'secondary'), headline, subtext, ctaText, ctaLink
- Primary: full-width dark background, prominent CTA
- Secondary: lighter, subtle for mid-page
- Brutalist styling with hover animations

Create contact page at /kontakt:
- Page header with compelling headline
- Two-column: ContactForm left, contact info right
- Contact info: address (Stockholm), email, phone
- Trust signals at bottom (reuse TrustSignals or badges)

Add to homepage:
- CTABanner (primary) after blog preview section
- NewsletterSignup can go in footer later (defer to Phase 4)

Add translations:
- contact.title, contact.subtitle
- contact.form.* (labels, placeholders, errors, success, interests)
- contact.info.* (address, email, phone)
- newsletter.* (title, placeholder, button, success)
- cta.* (headline, subtext variations)
  </action>
  <verify>/kontakt page works with form submission, CTA banner on homepage</verify>
  <done>Contact page complete, conversions tracked in Directus, CTA placed strategically</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Directus has form_submissions collection
- [ ] /kontakt page displays with working form
- [ ] Form submission creates entry in Directus
- [ ] Form validation shows errors correctly
- [ ] Homepage has CTA banner
- [ ] Both sv and en translations complete
- [ ] Focus states are accessible
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Form submissions stored in Directus (viewable as leads)
- Multiple conversion points implemented
- Design matches brutalist aesthetic
</success_criteria>

<output>
After completion, create `.planning/phases/03-content-conversion/03-03-SUMMARY.md`
</output>
