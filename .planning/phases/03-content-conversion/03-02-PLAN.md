---
phase: 03-content-conversion
plan: 02
type: execute
depends_on: []
files_modified: [src/lib/directus.ts, src/components/BlogCard.tsx, src/components/BlogPreview.tsx, src/app/[locale]/blogg/page.tsx, src/app/[locale]/blogg/[slug]/page.tsx, messages/sv.json, messages/en.json]
---

<objective>
Create blog section with Directus CMS integration for thought leadership content

Purpose: Establish Digitalist as thought leader, drive organic traffic, nurture leads - all content manageable via CMS
Output: Blog components + Directus collection + listing and article pages
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/lib/directus.ts
@src/components/DimensionCard.tsx
@src/app/[locale]/page.tsx
@messages/sv.json

**Tech stack available:** Next.js 15, next-intl, Tailwind CSS, Directus SDK
**Established patterns:** Card components with brutalist styling, server components for data fetching
**Directus CMS:** https://cms.main-bvxea6i-gyichbvbjhhpy.eu-5.platformsh.site/admin

**Constraining decisions:**
- Phase 01-03: Brutalist design tokens (shadows, borders, hover animations)
- Phase 01-02: Directus 11.x with PostgreSQL
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create blog_posts collection in Directus and update types</name>
  <files>src/lib/directus.ts</files>
  <action>
Create the blog_posts collection in Directus:

Collection: blog_posts
Fields:
- id (uuid, primary key, auto)
- status (string: published/draft/archived)
- date_published (datetime)
- author (string)
- category (string: ai-act, technical-guide, case-story, strategy)
- featured_image (file relation, optional)
- translations (translations field)

Collection: blog_posts_translations
Fields:
- id (integer, auto)
- blog_posts_id (m2o to blog_posts)
- languages_code (string: sv, en)
- title (string)
- slug (string, unique per language)
- excerpt (text)
- content (text/markdown or WYSIWYG)

Update src/lib/directus.ts Schema type:
- Add BlogPost type with translations relation
- Add BlogPostTranslation type
- Add helper functions: fetchBlogPosts(locale), fetchBlogPost(slug, locale)

Seed 3 blog posts via Directus admin:
1. "AI Act och svensk offentlig sektor" (ai-act category)
2. "Så bygger du suverän AI-infrastruktur" (technical-guide)
3. "Socialstyrelsen: En framgångssaga" (case-story)
  </action>
  <verify>Directus API returns blog posts with translations</verify>
  <done>blog_posts collection exists, types updated, 3 seed entries created</done>
</task>

<task type="auto">
  <name>Task 2: Create BlogCard component and BlogPreview section</name>
  <files>src/components/BlogCard.tsx, src/components/BlogPreview.tsx</files>
  <action>
Create BlogCard component:
- Props: title, excerpt, date, author, category, slug, locale
- Brutalist card styling matching existing components
- Category badge at top with color coding per category
- Date formatted with Intl.DateTimeFormat for locale
- Link to /blogg/[slug]

Create BlogPreview server component:
- Accept locale prop
- Fetch 3 latest published posts from Directus, ordered by date_published desc
- Section header: title/subtitle from translations
- Responsive grid: featured post larger, 2 smaller
- "Alla artiklar" link to /blogg

Server component (no 'use client') for data fetching.
Handle Directus errors with fallback UI.
  </action>
  <verify>npm run build passes, BlogPreview fetches from Directus</verify>
  <done>BlogCard and BlogPreview components exist, fetch from Directus, brutalist design</done>
</task>

<task type="auto">
  <name>Task 3: Create blog pages and integrate into homepage</name>
  <files>src/app/[locale]/blogg/page.tsx, src/app/[locale]/blogg/[slug]/page.tsx, src/app/[locale]/page.tsx, messages/sv.json, messages/en.json</files>
  <action>
Create blog listing page at /blogg:
- Server component fetching all published posts from Directus
- Grid of BlogCards (3 cols desktop, 2 tablet, 1 mobile)
- Category filter (client-side filtering of fetched data)
- Page metadata from translations

Create article detail page at /blogg/[slug]:
- Fetch single post by slug and locale from Directus
- Article layout: title, date, author, category badge
- Content rendered as HTML (from Directus WYSIWYG) or markdown
- Author section at bottom
- Related posts (same category, from Directus)
- CTA section with contact link
- generateStaticParams from Directus slugs

Add to homepage:
- Import and render BlogPreview after CaseStudies (or ClientLogos if 03-01 not done)
- Pass locale prop

Add translations (UI strings only):
- blog.title, blog.subtitle, blog.viewAll, blog.readMore, blog.minRead
- blog.categories.* (aiAct, technicalGuide, caseStory, strategy)
- blog.article.relatedPosts, blog.article.author, blog.article.cta
  </action>
  <verify>Homepage shows blog preview from Directus, /blogg/[slug] renders articles</verify>
  <done>Blog pages work with Directus data, category filtering works</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Directus has blog_posts collection with 3 entries
- [ ] Homepage displays blog preview fetched from Directus
- [ ] /blogg page lists articles with category filter
- [ ] /blogg/[slug] displays article with proper typography
- [ ] Both sv and en content works via translations
- [ ] Graceful error handling if Directus unavailable
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Blog content editable via Directus CMS
- Design matches brutalist aesthetic
</success_criteria>

<output>
After completion, create `.planning/phases/03-content-conversion/03-02-SUMMARY.md`
</output>
