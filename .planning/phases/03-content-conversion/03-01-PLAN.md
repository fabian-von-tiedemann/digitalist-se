---
phase: 03-content-conversion
plan: 01
type: execute
depends_on: []
files_modified: [src/lib/directus.ts, src/components/CaseCard.tsx, src/components/CaseStudies.tsx, src/app/[locale]/case/page.tsx, src/app/[locale]/case/[slug]/page.tsx, messages/sv.json, messages/en.json]
---

<objective>
Create case studies section with Directus CMS integration

Purpose: Build trust and demonstrate concrete results, with content manageable via Directus CMS
Output: Case studies components + Directus collection + dedicated case study pages
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/lib/directus.ts
@src/components/DimensionCard.tsx
@src/components/ClientLogos.tsx
@src/app/[locale]/page.tsx
@messages/sv.json

**Tech stack available:** Next.js 15, next-intl, Tailwind CSS, Directus SDK
**Established patterns:** Card components with brutalist styling, useTranslations hook, locale-aware routing
**Directus CMS:** https://cms.main-bvxea6i-gyichbvbjhhpy.eu-5.platformsh.site/admin

**Constraining decisions:**
- Phase 02-03: Placeholder logos pattern (actual content can be added later)
- Phase 01-03: Brutalist design tokens (shadows, borders, hover animations)
- Phase 01-02: Directus 11.x with PostgreSQL
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create case_studies collection in Directus and update types</name>
  <files>src/lib/directus.ts</files>
  <action>
First, create the case_studies collection in Directus via the Admin UI or API:

Collection: case_studies
Fields:
- id (uuid, primary key, auto)
- status (string: published/draft/archived)
- sort (integer, for ordering)
- translations (translations field - links to case_studies_translations)

Collection: case_studies_translations
Fields:
- id (integer, auto)
- case_studies_id (m2o to case_studies)
- languages_code (string: sv, en)
- title (string)
- client (string)
- slug (string, unique per language)
- description (text)
- challenge (text)
- solution (text)
- results (json array of strings, e.g., ["40% effektivisering", "2M kr besparing"])
- quote (text, optional)
- quote_author (string, optional)

Update src/lib/directus.ts Schema type:
- Add CaseStudy type with translations relation
- Add CaseStudyTranslation type
- Export helper function to fetch cases by locale

Seed 3 case studies via Directus admin:
1. Socialstyrelsen (featured)
2. Statlig myndighet (placeholder)
3. VÃ¥rdorganisation (placeholder)
  </action>
  <verify>Directus API returns case studies: curl with auth token returns data</verify>
  <done>case_studies collection exists in Directus, types updated, 3 seed entries created</done>
</task>

<task type="auto">
  <name>Task 2: Create CaseCard component and CaseStudies section with Directus fetch</name>
  <files>src/components/CaseCard.tsx, src/components/CaseStudies.tsx</files>
  <action>
Create CaseCard component:
- Props: title, client, description, results (string[]), slug, locale
- Brutalist styling: border-2 border-primary-900, shadow-brutal, translate hover animation
- Results displayed as metric badges
- Link to /case/[slug] using locale-aware Link from routing.ts

Create CaseStudies server component:
- Accept locale prop
- Fetch case studies from Directus using directus client with filter for published status and locale
- Section header with title/subtitle (use translations from messages)
- Grid layout: 2 columns on desktop, 1 on mobile
- Featured case (first) gets larger card
- "Se alla case" link at bottom

Use server component for data fetching (no 'use client').
Handle Directus fetch errors gracefully with fallback UI.
  </action>
  <verify>npm run build passes, CaseStudies fetches from Directus</verify>
  <done>CaseCard and CaseStudies components exist, fetch from Directus, brutalist design</done>
</task>

<task type="auto">
  <name>Task 3: Create case pages and integrate into homepage</name>
  <files>src/app/[locale]/case/page.tsx, src/app/[locale]/case/[slug]/page.tsx, src/app/[locale]/page.tsx, messages/sv.json, messages/en.json</files>
  <action>
Create case listing page at /case:
- Server component fetching all published cases from Directus
- Grid of CaseCards
- Page title from translations

Create dynamic case detail page at /case/[slug]:
- Fetch single case by slug and locale from Directus
- Full layout: hero, challenge, solution, results metrics, quote
- Related cases at bottom (other cases from Directus)
- CTA to contact
- Use generateStaticParams to pre-render all slugs from Directus

Add to homepage:
- Import and render CaseStudies in page.tsx after ClientLogos
- Pass locale to CaseStudies

Add translations (UI strings only, content from Directus):
- cases.title, cases.subtitle, cases.viewAll
- cases.detail.challenge, cases.detail.solution, cases.detail.results
- cases.detail.quote, cases.detail.related, cases.detail.cta
  </action>
  <verify>Homepage shows cases from Directus, /case/[slug] renders case details</verify>
  <done>Case pages work with Directus data, translations for UI strings only</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Directus has case_studies collection with 3 entries
- [ ] Homepage displays case studies fetched from Directus
- [ ] /case page lists all published case studies
- [ ] /case/socialstyrelsen shows detailed case study
- [ ] Both sv and en content works (via translations relation)
- [ ] Graceful error handling if Directus unavailable
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Case studies content editable via Directus CMS
- Brutalist design aesthetic maintained
</success_criteria>

<output>
After completion, create `.planning/phases/03-content-conversion/03-01-SUMMARY.md`
</output>
