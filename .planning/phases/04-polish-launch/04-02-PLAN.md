---
phase: 04-polish-launch
plan: 02
type: execute
depends_on: []
files_modified: [src/app/[locale]/layout.tsx, src/components/Header.tsx, src/components/Hero.tsx, src/components/ContactForm.tsx, src/app/globals.css]
domain: next-js
---

<objective>
Implement WCAG 2.1 AA accessibility requirements for public sector compliance.

Purpose: Offentlig sektor kräver WCAG-tillgänglighet - ensures site is usable by all visitors including those using assistive technologies.
Output: Accessible site passing automated WCAG checks with proper semantic structure and keyboard navigation.
</objective>

<execution_context>
./.claude/get-shit-done/workflows/execute-plan.md
./summary.md
./.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior decisions:
- Brutalist design with high-contrast colors (01-03)
- Primary navy (#0A1628), Accent blue (#2563EB), Concrete gray (#F5F5F4)
- Client components for interactive elements (Header, ContactForm)

# Relevant source files:
@src/components/Header.tsx
@src/components/Hero.tsx
@src/components/ContactForm.tsx
@src/app/globals.css

# WCAG 2.1 AA requirements:
- 4.5:1 contrast ratio for normal text
- 3:1 contrast ratio for large text (18pt+)
- Keyboard navigation for all interactive elements
- Focus indicators visible
- ARIA labels for non-text content
- Skip to content link
- Semantic HTML structure
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add skip link and improve document structure</name>
  <files>src/app/[locale]/layout.tsx, src/app/globals.css</files>
  <action>
1. Add skip-to-content link as first element in body:
   - Visually hidden until focused (use sr-only + focus:not-sr-only pattern)
   - Links to #main-content
   - Text: "Hoppa till innehåll" / "Skip to content"

2. Add id="main-content" to main element in layout

3. Ensure proper landmark structure:
   - header role="banner" (already via Header component)
   - main role="main"
   - Add footer with role="contentinfo" (create simple Footer component)

4. Add CSS for skip-link:
   - Position fixed, top-left
   - Hidden until focused
   - High contrast when visible
  </action>
  <verify>Tab through page - skip link appears on first Tab press and works</verify>
  <done>Skip link functional, landmarks in place, accessible to screen readers</done>
</task>

<task type="auto">
  <name>Task 2: Fix Header keyboard navigation and ARIA</name>
  <files>src/components/Header.tsx</files>
  <action>
1. Mobile menu improvements:
   - Add aria-expanded to hamburger button
   - Add aria-controls linking to menu
   - Add aria-label="Huvudmeny" / "Main menu" to nav
   - Focus trap when menu open (focus first item, trap Tab, Escape closes)
   - Return focus to hamburger button when menu closes

2. Desktop nav improvements:
   - Ensure all links have visible focus state (outline or equivalent)
   - Add aria-current="page" to current page link

3. Language switcher:
   - Add aria-label describing language switch action
   - Ensure keyboard accessible

Use useTranslations for Swedish/English aria-labels.
  </action>
  <verify>Keyboard-only navigation through header works, screen reader announces menu state</verify>
  <done>Header fully keyboard accessible with proper ARIA attributes</done>
</task>

<task type="auto">
  <name>Task 3: Form accessibility and focus states</name>
  <files>src/components/ContactForm.tsx, src/app/globals.css</files>
  <action>
1. ContactForm improvements:
   - Associate labels with inputs using htmlFor/id
   - Add aria-describedby for error messages
   - Add aria-invalid="true" when field has error
   - Add aria-required="true" for required fields
   - Ensure error messages announced (aria-live="polite" on error container)
   - Add visible focus ring to all inputs

2. Global focus styles in globals.css:
   - Add focus-visible outline for all interactive elements
   - Use accent-600 color for focus ring
   - Ensure 3px solid outline with 2px offset
   - Remove default outline, add custom for consistency

3. Button focus states:
   - Ensure all buttons have visible focus indicator
   - CTA buttons maintain visibility of focus ring against backgrounds
  </action>
  <verify>Tab through form - all fields focusable with visible indicator, errors announced</verify>
  <done>Forms fully accessible, focus visible on all interactive elements</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>WCAG accessibility improvements: skip link, keyboard navigation, ARIA attributes, focus states</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open http://localhost:3000
    3. Press Tab - skip link should appear at top-left
    4. Press Enter on skip link - focus moves to main content
    5. Tab through page - all interactive elements have visible focus ring
    6. Tab to hamburger menu (mobile view) - press Enter, menu opens
    7. Press Escape - menu closes
    8. Navigate to /kontakt
    9. Tab through form - all fields accessible
    10. Submit empty form - error messages appear and are focusable
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] Skip link visible on focus and works
- [ ] All interactive elements keyboard accessible
- [ ] Focus indicators visible on all focusable elements
- [ ] Mobile menu has proper ARIA and keyboard support
- [ ] Form errors properly announced
</verification>

<success_criteria>

- All tasks completed
- Human verification passed
- No TypeScript errors
- Site passes basic WCAG 2.1 AA automated checks
  </success_criteria>

<output>
After completion, create `.planning/phases/04-polish-launch/04-02-SUMMARY.md`
</output>
